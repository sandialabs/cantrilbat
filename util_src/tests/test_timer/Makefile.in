#!/bin/sh
#
#  Makefile.in: 
#     Makefile for mpequil
#
# $Id: Makefile.in,v 1.3 2010/10/14 21:11:13 clueth Exp $
#
#
#  Build mpequil through the CANTERA_INSTALL directories.
#
# Copywrite 2004 Sandia Corporation. Under the terms of Contract
# DE-AC04-94AL85000, there is a non-exclusive license for use of this
# work by or on behalf of the U.S. Government. Export of this program
# may require a license from the United States Government.
#

.SUFFIXES: .d

PROGRAM=timerTests

##########################################################################
#           Setup The Cantera Directory locations
#########################################################################

PURIFY=@PURIFY@

# These links are to Cantera's install space
CT_INCROOT =  @ct_incroot@

#
# Bring in the Cantera includes through the .mak file
#
include $(CT_INCROOT)/cantera/Cantera.mak

UTILSRC_DIR = ../../src
UTILSRC_DEP = $(UTILSRC_DIR)/libutil_src.a
UTILSRC     = -L$(UTILSRC_DIR) -lutil_src
#
#########################################################################
# Set up the various local and global defines
########################################################################
LDEFINES =
GDEFINES =
#
# Set up the global include directory macro
#
INCLUDE_DIRS = $(CANTERA_TOTAL_INCLUDES)  -I$(UTILSRC_DIR)

all: .depends $(PROGRAM)

LDR = $(F77LDR)
LDRFLAGS = $(F77LDRFLAGS)
LDRFLAGS_DEBUG = -g -y $(FFLAGS_BSD)

CCFLAGS =   $(LDEFINES) $(INCLUDE_DIRS) $(GDEFINES)

OBJ = timerTests.o

############################################################################
# section to set up compiler rules
###########################################################################
#
# the C++ compiler
#
CXX = @CXX@
DEBUG_FLAGS = -O0 -fno-inline -g
CXXFLAGS = @CXXFLAGS@
LCXX_FLAGS = @LCXX_FLAGS@
LCXX_END_LIBS = @LCXX_END_LIBS@
CXXLDR = $(CXX)
#
# C compiler
#
CC = @CC@
CFLAGS = @CXXFLAGS@
#
# Both the C and C++ compiler predefines
#
CCFLAGS =  $(GDEFINES) $(INCLUDE_DIRS) $(LDEFINES) 
#
.c.o:
	$(PURIFY) $(CC) $(CFLAGS) $(CCFLAGS) -c $<
.cpp.o:
	$(PURIFY) $(CXX) $(CXXFLAGS) $(CCFLAGS) -c $<

.f:
	$(F77) $(FFLAGS) -c $<
	$(F77LDR) $(F77LDRFLAGS) $*.o -o $@


############################################################################
# section to set up depends
###########################################################################
DEPENDS = $(OBJ:.o=.d) 

.f.d:
	echo "$*.o: $*.f" > $*.d

.cpp.d:
	@CXX_DEPENDS@ $(CXXFLAGS) $(CCFLAGS) -c $*.cpp > $*.d

.c.d:
	@CXX_DEPENDS@ $(CXXFLAGS) $(CCFLAGS) -c $*.c > $*.d

depends:
	$(RM) $(DEPENDS)
	$(MAKE) .depends

.depends: $(DEPENDS)
	cat *.d > .depends

test: 
	@MAKE@
	./$(PROGRAM)

rebaseline:

##############################################################################

$(DEPENDS): Makefile

$(PROGRAM): $(OBJ) $(UTILSRC_DEP) 
	$(PURIFY) $(CXXLDR) $(CCFLAGS) $(LCXX_FLAGS) -o $(PROGRAM) $(OBJ) \
                  $(UTILSRC) $(CANTERA_TOTAL_LIBS)  -lgtest -lrt \
                  $(LCXX_END_LIBS)

#############################################################################
#          INSTALL RULES
##############################################################################

ifeq ($(wildcard .depends), .depends)
include .depends
endif


clean:
	$(RM) *.o  .depends *.d *~ jacobian_unit


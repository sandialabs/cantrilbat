#!/bin/sh
#
#
# $Id: Makefile.in,v 1.3 2011/01/01 02:24:53 hkmoffa Exp $
#
#
# Copywrite 2004 Sandia Corporation. Under the terms of Contract
# DE-AC04-94AL85000, there is a non-exclusive license for use of this
# work by or on behalf of the U.S. Government. Export of this program
# may require a license from the United States Government.
#

.SUFFIXES: .d

PROGRAM = LiKCl_PorousBat
TEST_NAME = LiKCl_PorousBat_SPCD_MPNewman

DATA = \
FeS2_A.xml          Li12Si7.xml  LiKCl_Margules_trans.xml         LiKCl_recipmoltenSalt.xml  LiSi_2_electrode.xml  LiSi_Ext_electrode.xml       MgO.xml                \
FeS2_B.xml          Li13Si4.xml  LiKCl_Margules.xml               Li_Liquid.xml              LiSi_3_electrode.xml  LiSi_InternalSurf.xml        Si_Solid.xml  \
FeS2_electrode.xml  Li7Si3.xml   LiKCl_recipmoltenSalt_trans.xml  LiSi_1_electrode.xml       LiSi_electrode.xml    metal_Li_LiCl_electrons.xml  

BLESSED_FILES = \
BulkDomain1D_0_blessed.dat  BulkDomain1D_2_blessed.dat  SurDomain1D_0_blessed.dat  SurDomain1D_2_blessed.dat  timeDep_IV_blessed.dat \
BulkDomain1D_1_blessed.dat  solution_blessed.xml        SurDomain1D_1_blessed.dat  SurDomain1D_3_blessed.dat good_out.txt

INPUT_FILES = anode.inp  cathode.inp  LiKCl_PorousBat.inp

##########################################################################
#           Setup The Zuzax Directory locations
#########################################################################

PROGRAM_ORIGIN = ../../src_LiKCl_PorousBat/$(PROGRAM)

PURIFY=@PURIFY@

# These links are to Cantera's install space
CT_INCROOT =  @ct_incroot@

#
# Bring in the Zuzax includes through the .mak file
#
include $(CT_INCROOT)/zuzax/Zuzax.mak

all: 

depends:
	$(RM) $(DEPENDS)
	$(MAKE) .depends

.depends:
	touch .depends

test:
	@@MAKE@ -s
	@echo -n 'Checking need to run test $(TEST_NAME): '
	@@MAKE@ -q -s  runGood ; ss=$$? ; if test $$ss = "0" ; then echo '   NOT NEEDED' ; else  @MAKE@ -s  runGood ; fi

runGood: $(PROGRAM_ORIGIN) $(DATA) Makefile $(BLESSED_FILES)
	@echo 'RUNNING TEST ' $(TEST_NAME)
	( export XMLSOLNDIFF=../../src_test/xmlSolnDiff ; ./runtest)

rebaseline:
	./rebaseline

#############################################################################
#          INSTALL RULES
##############################################################################

ifeq ($(wildcard .depends), .depends)
include .depends
endif

clean:
	$(RM) runInProgress.txt transport_log.xml  

test_clean:
	$(RM) SurDomain1D_0.dat SurDomain1D_1.dat SurDomain1D_2.dat  timeDep_IV.dat \
              solution.xml BulkDomain1D_0.dat  BulkDomain1D_1.dat  BulkDomain1D_2.dat runGood runBad \
              out.txt  diff*  $(PROGRAM) runInProgress.txt transport_log.xml

dist_clean:
	@MAKE@ test_clean



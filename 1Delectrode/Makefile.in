#/bin/sh
###############################################################
#
#  Need to compile the two source directories before attempting to link others
#
all:
	cd src ;                  $(MAKE) all
	cd src_CanteraElectrode ; $(MAKE) all
	$(MAKE)  alllink

src_t:
	cd src &&                               $(MAKE) $(SSIL) $(TASK)

src_test_t:
	cd src_test &&                          $(MAKE) $(SSIL) $(TASK)

src_CanteraElectrode_t:
	cd src_CanteraElectrode &&              $(MAKE) $(SSIL) $(TASK)

src_LiIon_PorousBat_t:
	cd src_LiIon_PorousBat &&               $(MAKE) $(SSIL) $(TASK)

src_Cu2S_t:
	cd src_Cu2S &&                          $(MAKE) $(SSIL) $(TASK)

src_LiKCl_infPlateBat_t:
	cd src_LiKCl_infPlateBat &&             $(MAKE) $(SSIL) $(TASK)

src_LiKCl_infPorousBat_t:
	cd src_LiKCl_infPorousBat &&            $(MAKE) $(SSIL) $(TASK)

src_LiKCl_PorousBat_t:
	cd src_LiKCl_PorousBat &&               $(MAKE) $(SSIL) $(TASK)

test_suite_t:
	cd test_suite &&                        $(MAKE) $(SSIL) $(TASK)

test_develop_t:
	cd test_develop &&                      $(MAKE) $(SSIL) $(TASK)

test_other_t:
	cd test_other &&                        $(MAKE) $(SSIL) $(TASK)

test_LiKCl_t:
	cd test_LiKCl &&                        $(MAKE) $(SSIL) $(TASK)


TEST_DIRS = test_suite_t \
            test_develop_t \
            test_other_t \
            test_LiKCl_t \

ALL_DIRS  = src_t \
	    src_test_t \
	    src_CanteraElectrode_t \
	    src_LiIon_PorousBat_t \
            src_Cu2S_t \
            src_LiKCl_infPlateBat_t \
            src_LiKCl_infPorousBat_t \
            src_LiKCl_PorousBat_t \
            $(TEST_DIRS)


alllink: TASK = all
alllink: $(ALL_DIRS)

depends:  TASK = depends
depends: $(ALL_DIRS)

clean:  TASK = clean
clean: $(ALL_DIRS)

clean_test: TASK = clean_test
clean_test: $(ALL_DIRS)

clean_dist:  TASK = clean_dist
clean_dist: $(ALL_DIRS)

clean_test_flags:  TASK = clean_test_flags
clean_test_flags: $(ALL_DIRS)

test:  TASK = test
test: $(TEST_DIRS)

testAll:  TASK = testAll
testAll: $(TEST_DIRS)

memtest:  TASK = memtest
memtest: $(TEST_DIRS)

rebaseline: TASK = rebaseline
rebaseline: $(TEST_DIRS)

install: TASK = instasll
install: $(ALL_DIRS)


allsrc:
	cd src;                           $(MAKE) 
	cd src_test;                      $(MAKE)
	cd src_CanteraElectrode;          $(MAKE)
	cd src_LiIon_PorousBat;           $(MAKE)
	cd src_Cu2S;                      $(MAKE)
	cd src_LiKCl_infPlateBat;         $(MAKE)
	cd src_LiKCl_infPorousBat;        $(MAKE)
	cd src_LiKCl_PorousBat;           $(MAKE)

allback:
	cd src;                           $(MAKE) all
	cd src_test;                      $(MAKE) all
	cd src_CanteraElectrode;          $(MAKE) all
	cd src_LiKCl_PorousBat;           $(MAKE) all
	cd src_LiKCl_infPorousBat;        $(MAKE) all
	cd src_LiKCl_infPlateBat;         $(MAKE) all
	cd src_Cu2S;                      $(MAKE) all
	cd src_LiIon_PorousBat;           $(MAKE) all
	cd test_LiKCl;                    $(MAKE)
	cd test_other;                    $(MAKE) 
	cd test_develop;                  $(MAKE)
	cd test_suite;                    $(MAKE)



clean_test:
	cd test_suite;                    $(MAKE) clean_test
	cd test_develop;                  $(MAKE) clean_test
	cd test_other;                    $(MAKE) clean_test
	cd test_LiKCl;                    $(MAKE) clean_test

dist_clean:
	$(MAKE) clean_dist

# end of file

